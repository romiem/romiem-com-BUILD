(this["webpackJsonpromiem-com"]=this["webpackJsonpromiem-com"]||[]).push([[246],{391:function(e,t,n){"use strict";n.r(t),n.d(t,"OpengraphSinglePageApp",(function(){return s}));n(0);var o=n(13),r=n(30),a=n(1),s=function(e){var t=r.a.OPENGRAPH_SINGLE_PAGE_APP;return Object(a.jsx)(o.m,{className:"OpengraphSinglePageApp",children:Object(a.jsx)(o.c,{article:t,children:Object(a.jsxs)(o.d,{children:[Object(a.jsx)("p",{className:"mxn__fontLeading",children:"I love single page apps. But one perennial problem with them is that most social media crawlers from Twitter to LinkedIn cannot process the page (to generate social media previews) without server-side intervention."}),Object(a.jsx)("p",{children:"The most common solution around this is to have a lightweight server side app that serves your app, but also listens for crawlers from Twitter, LinkedIn et al and serves them a barebones HTML response with Opengraph tags embedded."}),Object(a.jsxs)("p",{children:["Given I was working on a small/medium sized SPA, this was overkill for my purposes, and so I investigated other options. I eventually came across a library called ",Object(a.jsx)(o.h,{href:"https://github.com/stereobooster/react-snap",className:"u-anchor u-anchor--accent u-anchor--underline",children:"react-snap"}),"."]}),Object(a.jsx)("p",{children:"React-snap is a static site generator that works by firing up a Chromium browser instance, visits your root path, and scans for all internal links. It then recursively navigates to each of those links, saves the HTML, and repeats the process."}),Object(a.jsx)("p",{children:"Needless to say, this solution is only practical if you have a SPA with known or fixed routes. Dynamic URLs (like those used for usernames in social networks) would not be feasible."}),Object(a.jsx)("h2",{children:"index.tsx"}),Object(a.jsx)("p",{children:"In the entry index.tsx file of your app, you need to replace ReactDOM.render with a conditional ReactDom.hydrate statement like the following:"}),Object(a.jsx)(o.g,{language:"tsx",code:i}),Object(a.jsx)("p",{children:"The hydrate call is used when the HTML has been pre-rendered (in our case, by a static site generator, but can also be server-side) and therefore we can tell React to preserve it and only attach event handlers. Note this is only occurs on startup of the SPA - after this point, the application functions as a regular SPA."}),Object(a.jsx)("h2",{children:"package.json"}),Object(a.jsx)("p",{children:"Next, we add the following to your package.json file:"}),Object(a.jsx)(o.g,{language:"json",code:c}),Object(a.jsxs)("p",{children:["And that's our static site generator setup complete! Whenever we run ",Object(a.jsx)("strong",{children:"yarn build"}),", we now have our static site output to the build folder."]}),Object(a.jsx)("h2",{children:"MetaTags.jsx"}),Object(a.jsxs)("p",{children:["Next I create a helper component to wrap around ",Object(a.jsx)(o.h,{href:"https://github.com/nfl/react-helmet",className:"u-anchor u-anchor--accent u-anchor--underline",children:"react-helmet"})," to render all my metatags."]}),Object(a.jsx)(o.g,{language:"tsx",code:p}),Object(a.jsx)("h2",{children:"HomeRoute.tsx"}),Object(a.jsx)("p",{children:"All that's left to do is call the component in each of your routes."}),Object(a.jsx)(o.g,{language:"tsx",code:l}),Object(a.jsx)("p",{children:"That wraps up the process I took to convert my SPA into a static site, with support for social media sharing previews. For anyone interested, the deployment environment for this SPA was GitHub Pages. If this helped you out, or you have any questions, drop me a line on Twitter or Instagram - I'd love to hear from you!"})]})})})},i="const rootElm = document.getElementById('root')!;\nif (rootElm.hasChildNodes()) {\n  ReactDOM.hydrate(app, rootElm);\n} else {\n  ReactDOM.render(app, rootElm);\n};",c='"scripts": {\n  "postbuild": "react-snap"\n}',p='import React from \'react\';\nimport { Helmet } from \'react-helmet\';\n\ntype MetaTagsProps = {\n  title: string;\n  description: string;\n  ogType?: string;\n  // Relative path to your image - this component will fully qualify the URL for you\n  image?: string;\n};\n\nconst MetaTags: React.FC<MetaTagsProps> = (props) => {\n\n  // Create a REACT_APP_PUBLIC_URL property in your env file which is your fully qualified domain e.g. https://www.mydomain.com\n  const PUBLIC_URL = process.env.REACT_APP_PUBLIC_URL!;\n  const url = PUBLIC_URL + window.location.pathname;\n  const imageUrl = PUBLIC_URL + props.image;\n\n  return (\n    <Helmet>\n      <title>{props.title}</title>\n      <meta name="description" content={props.description} />\n      <meta property="og:type" content={props.ogType} />\n      <meta property="og:site_name" content="YOUR SITE NAME" />\n      <meta property="og:title" content={props.title} />\n      <meta property="og:description" content={props.description} />\n      <meta property="og:url" content={url} />\n      <meta property="og:image" content={imageUrl} />\n      <meta property="og:image:width" content="1200" />\n      <meta property="og:image:height" content="800" />\n      <meta property="twitter:card" content="summary_large_image" />\n      <meta property="twitter:site" content="@YOUR_TWITTER_HANDLE" />\n      <meta property="twitter:creator" content="@YOUR_TWITTER_HANDLE" />\n      <meta property="twitter:title" content={props.title} />\n      <meta property="twitter:description" content={props.description} />\n      <meta property="twitter:url" content={url} />\n      <meta property="twitter:image" content={imageUrl} />\n    </Helmet>\n  );\n};\n\n\nMetaTags.defaultProps = {\n  title: \'\',\n  description: \'\',\n  ogType: \'website\',\n  image: \'/images/icons/logo-opengraph.jpg\', // point to your default Opengraph image\n};\n\nexport { MetaTags };',l="import React from 'react';\nimport { MetaTags } from '_components';\nimport './HomeRoute.scss';\nimport imgBanner from './images/banner.jpg';\n\nconst HomeRoute: React.FC = (props) => {\n\n  return (\n    <div className=\"HomeRoute\">\n\n      <MetaTags\n        title=\"My page title\"\n        description=\"My page description\"\n        image={imgBanner}\n      />\n\n      <h1>Hello World!</h1>\n\n    </div>\n  );\n};\n\nexport { HomeRoute };";t.default=s}}]);
//# sourceMappingURL=246.a6b0d039.chunk.js.map